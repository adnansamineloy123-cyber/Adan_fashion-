<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF PHANTOM OPS - LOGIN</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Black+Ops+One&family=Share+Tech+Mono&display=swap');
        :root { --glow: #ff003c; --sub-glow: #00e5ff; --bg: #030305; }
        body { margin: 0; background: var(--bg); height: 100vh; display: flex; align-items: center; justify-content: center; font-family: 'Share Tech Mono', monospace; overflow: hidden; color: white; }
        .data-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(3,3,5,0.9), rgba(3,3,5,0.9)), repeating-linear-gradient(0deg, transparent 0, transparent 1px, rgba(0, 229, 255, 0.03) 1px, rgba(0, 229, 255, 0.03) 2px); background-size: 100% 3px; z-index: -1; }
        .phantom-card { width: 420px; background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(10px); border-left: 5px solid var(--glow); border-right: 1px solid var(--sub-glow); padding: 40px; position: relative; transform: skew(-2deg); box-shadow: -20px 0 50px rgba(255, 0, 60, 0.1), 20px 0 50px rgba(0, 229, 255, 0.1); }
        .phantom-card::before { content: "SECURE ENTRANCE"; position: absolute; top: -25px; left: 10px; font-size: 12px; color: var(--glow); letter-spacing: 5px; }
        .logo-area { text-align: left; margin-bottom: 40px; transform: skew(2deg); }
        .logo-area h1 { font-family: 'Black Ops One', cursive; font-size: 2.5rem; margin: 0; line-height: 1; background: linear-gradient(to right, #fff, var(--sub-glow)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .input-wrapper { margin-bottom: 25px; position: relative; transform: skew(2deg); }
        .input-wrapper label { display: block; font-size: 10px; color: var(--sub-glow); margin-bottom: 5px; text-transform: uppercase; }
        .input-wrapper input { width: 100%; background: rgba(0,0,0,0.6); border: 1px solid rgba(0, 229, 255, 0.2); padding: 12px; color: #fff; font-size: 1.2rem; outline: none; transition: 0.3s; box-sizing: border-box; }
        .input-wrapper input:focus { border-color: var(--glow); box-shadow: 0 0 15px rgba(255, 0, 60, 0.3); }
        .deploy-btn { width: 100%; padding: 18px; background: transparent; color: #fff; border: 2px solid var(--glow); font-family: 'Black Ops One', cursive; font-size: 1.1rem; cursor: pointer; position: relative; transition: 0.3s; z-index: 1; overflow: hidden; transform: skew(2deg); }
        .deploy-btn::after { content: ""; position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: var(--glow); z-index: -1; transition: 0.4s; }
        .deploy-btn:hover::after { left: 0; }
        .deploy-btn:hover { color: #000; box-shadow: 0 0 30px var(--glow); }
        .bottom-links { margin-top: 30px; display: flex; justify-content: space-between; font-size: 12px; color: #666; transform: skew(2deg); }
        .bottom-links span { cursor: pointer; transition: 0.3s; }
        .bottom-links span:hover { color: var(--sub-glow); }
        .scan-bar { position: absolute; width: 100%; height: 2px; background: var(--sub-glow); opacity: 0.3; top: 0; animation: scan 4s linear infinite; }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        .hidden { display: none; }
        #status-msg { margin-top: 15px; font-size: 12px; text-align: center; color: var(--glow); }
    </style>
</head>
<body>
    <div class="data-bg"></div>
    <div class="phantom-card">
        <div class="scan-bar"></div>
        
        <div id="login-form">
            <div class="logo-area"><h1>PHANTOM<br>PROTOCOL</h1></div>
            <div class="input-wrapper">
                <label>System_ID (Game ID)</label>
                <input type="text" id="login-uid" placeholder="UID-092837">
            </div>
            <div class="input-wrapper">
                <label>Security_Pass (PIN)</label>
                <input type="password" id="login-pass" placeholder="****">
            </div>
            <button class="deploy-btn" id="login-btn">DEPLOY_NOW</button>
            <div id="status-msg"></div>
            <div class="bottom-links">
                <span onclick="toggle()">CREATE_ACCOUNT</span>
                <span>LOST_SIGNAL?</span>
            </div>
        </div>

        <div id="reg-form" class="hidden">
            <div class="logo-area"><h1>NEW_RECRUIT<br>REGISTRY</h1></div>
            <div class="input-wrapper">
                <label>Call_Sign (Name)</label>
                <input type="text" id="reg-name" placeholder="Gamer_Name">
            </div>
            <div class="input-wrapper">
                <label>Game_ID (Unique ID)</label>
                <input type="text" id="reg-uid" placeholder="UID-XXXX">
            </div>
            <div class="input-wrapper">
                <label>Pin_Auth (4 Digit)</label>
                <input type="password" id="reg-pass" placeholder="****">
            </div>
            <button class="deploy-btn" style="border-color: var(--sub-glow);" id="reg-btn">CONFIRM_OPS</button>
            <div class="bottom-links"><span onclick="toggle()">BACK_TO_LOGIN</span></div>
        </div>
    </div>

    <script>
        function toggle() {
            document.getElementById('login-form').classList.toggle('hidden');
            document.getElementById('reg-form').classList.toggle('hidden');
            document.getElementById('status-msg').innerText = "";
        }

        // --- লগইন লজিক ---
        document.getElementById('login-btn').addEventListener('click', async () => {
            const id = document.getElementById('login-uid').value;
            const pin = document.getElementById('login-pass').value;
            const msg = document.getElementById('status-msg');

            if(!id || !pin) return msg.innerText = "ERROR: EMPTY FIELDS";
            msg.innerText = "AUTHENTICATING...";
            
            try {
                const response = await fetch('/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ id, pin })
                });
                
                const data = await response.json();
                if(data.success) {
                    msg.style.color = "var(--sub-glow)";
                    msg.innerText = "ACCESS GRANTED. REDIRECTING...";
                    localStorage.setItem('user_token', data.token);
                    // এখানে ফাইলের নাম home.html রাখা হয়েছে
                    setTimeout(() => window.location.href = "home.html", 1000);
                } else {
                    msg.innerText = "DENIED: " + data.message;
                }
            } catch (err) {
                msg.innerText = "CONNECTION FAILED";
            }
        });

        // --- রেজিস্ট্রেশন লজিক ---
        document.getElementById('reg-btn').addEventListener('click', async () => {
            const name = document.getElementById('reg-name').value;
            const id = document.getElementById('reg-uid').value;
            const pin = document.getElementById('reg-pass').value;
            const msg = document.getElementById('status-msg');

            if(!name || !id || !pin) return alert("সবগুলো ঘর পূরণ করুন!");
            
            try {
                const response = await fetch('/auth/register', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, id, pin })
                });
                const data = await response.json();
                if(data.success) {
                    alert("REGISTRATION SUCCESSFUL! PLEASE LOGIN.");
                    toggle(); 
                } else {
                    alert("FAILED: " + data.message);
                }
            } catch (err) {
                alert("SERVER ERROR");
            }
        });
    </script>
</body>
    </html>
                                                                                
