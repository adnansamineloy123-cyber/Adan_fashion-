<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FF PHANTOM OPS - HOME</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { background: #030305; color: white; font-family: sans-serif; text-align: center; padding: 50px; }
        .profile-box { border: 1px solid #00f3ff; padding: 20px; display: inline-block; margin-bottom: 20px; }
        .coin-balance { font-size: 24px; color: #ff003c; }
    </style>
</head>
<body>
    <div class="profile-box">User: <span id="user-name">Loading...</span></div>
    <div class="coin-balance">Balance: <span id="user-coins">0</span> ü™ô</div>
    <br><br>
    <button onclick="logout()" style="padding: 10px 20px; cursor: pointer;">LOGOUT</button>

    <script>
        window.onload = async function() {
            const token = localStorage.getItem('user_token');
            if (!token) {
                window.location.href = "index.html";
                return;
            }

            try {
                // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡ßá‡¶∞ ‡¶≤‡ßá‡¶ü‡ßá‡¶∏‡ßç‡¶ü ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ü‡¶®‡¶æ
                const response = await fetch(`/auth/user-data?id=${token}`);
                const data = await response.json();

                if(data.success) {
                    document.getElementById('user-name').innerText = "@" + data.name;
                    document.getElementById('user-coins').innerText = data.coins;
                    celebrate(); // ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá ‡¶∏‡ßá‡¶≤‡¶ø‡¶¨‡ßç‡¶∞‡ßá‡¶∂‡¶®
                } else {
                    window.location.href = "index.html";
                }
            } catch (err) {
                console.log("Error fetching data");
            }
        };

        function logout() {
            localStorage.removeItem('user_token');
            window.location.href = "index.html";
        }

        function celebrate() {
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#00f3ff', '#bc13fe', '#ffffff']
            });
        }
    </script>
</body>
</html>
